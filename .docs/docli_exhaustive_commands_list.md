# Docli Exhaustive Commands List

This document provides a comprehensive reference of all available commands, flags, and options in docli.

## Root Command

### `docli`

**Usage:** `docli`

**Description:** A documentation CLI tool

**Long Description:**
```
docli is a command-line tool for generating, managing, 
and working with documentation in various formats.

Use docli to:
- Generate documentation from source code
- Convert between different documentation formats
- Manage documentation workflows
- Create and maintain project documentation
```

**Behavior:** When run without subcommands, displays a welcome message: "Welcome to docli! Use --help to see available commands."

## Subcommands

### `docli init`

**Usage:** `docli init`

**Description:** Initialize documentation synchronization configuration

**Long Description:**
```
Initialize your documentation project by setting up platform configuration
and document specifications. This will guide you through an interactive setup
process and create a .docs/spec.md file with your configuration.
```

**Functionality:**
- Copies prompt files (updateDoc.prompt.md, syncDoc.prompt.md, refineDoc.prompt.md) to `.github/prompts/` directory
- Checks for existing `.docs/spec.md` configuration (exits with error if found)
- Interactive platform selection (Confluence, README)
- Interactive document configuration collection
- Generates and saves configuration to `.docs/spec.md`
- Creates `.docs` directory if it doesn't exist

**Interactive Flow:**
1. Prompt file copying:
   - Creates `.github/prompts/` directory if it doesn't exist
   - Copies `updateDoc.prompt.md`, `syncDoc.prompt.md`, and `refineDoc.prompt.md` if they don't exist

2. Platform selection with options:
   - `1` - Confluence
   - `2` - README
   - Multiple selections via comma-separated input (e.g., `1,2`)
   - Default: Confluence if no input provided

3. Document configuration loop:
   - Document title (empty to finish)
   - Document description
   - File/folder hints (multiple allowed, empty to finish)

**Error Conditions:**
- Exits with code 1 if `.docs/spec.md` already exists
- Provides instructions to remove existing configuration

**File Operations:**
- Creates `.github/prompts` directory with permissions `0755`
- Copies prompt files with permissions `0644`
- Creates `.docs` directory with permissions `0755`
- Writes `spec.md` file with permissions `0644`

### `docli version`

**Usage:** `docli version`

**Description:** Print the version number of docli

**Long Description:** Display the current version of docli.

**Output:**
```
docli v1.0.0
Built with Go
```

## Global Flags

These flags are available for all commands through the root command's persistent flags:

### `--verbose, -v`

**Type:** Boolean  
**Default:** `false`  
**Description:** Enable verbose output  
**Usage:** `docli [command] --verbose` or `docli [command] -v`

### `--quiet, -q`

**Type:** Boolean  
**Default:** `false`  
**Description:** Enable quiet mode  
**Usage:** `docli [command] --quiet` or `docli [command] -q`

### `--help, -h`

**Type:** Boolean  
**Description:** Show help information  
**Usage:** `docli --help` or `docli [command] --help`

## Command Hierarchy

```
docli (root)
‚îú‚îÄ‚îÄ init
‚îú‚îÄ‚îÄ version
‚îú‚îÄ‚îÄ --verbose, -v (global flag)
‚îú‚îÄ‚îÄ --quiet, -q (global flag)
‚îî‚îÄ‚îÄ --help, -h (global flag)
```

## Data Types and Structures

### Document Structure
```go
type Document struct {
    Name        string   // Document title
    Description string   // Document description
    FileHints   []string // Array of file/folder paths
}
```

### Configuration Structure
```go
type Config struct {
    Platforms []string   // Array of platform names
    Documents []Document // Array of document configurations
}
```

### Platform Options
- `confluence` - Confluence platform
- `readme` - README platform

## File Operations

### Configuration File Format

The generated `.docs/spec.md` follows this structure:

```markdown
# Documentation Configuration

This file contains the configuration for your documentation synchronization.

## Platforms

**Target Platforms:**
- [Platform Name]

## Documents

### [Number]. [Document Name]

**Description:** [Document Description]

**File/Folder Sources:**
- `[File/Folder Path]`

---
*Generated by docli init command*
```

### Directory Structure Created

```
.docs/
‚îî‚îÄ‚îÄ spec.md

.github/
‚îî‚îÄ‚îÄ prompts/
    ‚îú‚îÄ‚îÄ updateDoc.prompt.md
    ‚îú‚îÄ‚îÄ syncDoc.prompt.md
    ‚îî‚îÄ‚îÄ refineDoc.prompt.md
```

## Exit Codes

- `0` - Success
- `1` - Error (used by init command when configuration already exists, and by root command on execution errors)

## Dependencies

Based on the imports in the source code:
- `github.com/spf13/cobra` - CLI framework
- Go standard library packages:
  - `bufio` - Buffered I/O
  - `fmt` - Formatted I/O
  - `os` - Operating system interface
  - `path/filepath` - File path manipulation
  - `strings` - String operations
- Internal packages:
  - `github.com/Hasankanso/docli/internal/prompts` - Prompt file management

## Input Validation

### Platform Selection
- Accepts comma-separated numeric input
- Maps input: `1` ‚Üí `confluence`, `2` ‚Üí `readme`
- Filters duplicates
- Defaults to `confluence` for invalid/empty input

### Document Configuration
- Accepts any non-empty string for document names
- Empty document name terminates collection
- File hints are optional (can be empty)
- No character limits enforced

## Error Messages

### Init Command Errors

**Existing Configuration:**
```
‚ùå Error: Documentation configuration already exists!
Found existing configuration at: .docs/spec.md

To start fresh, please remove the existing configuration first:
  rm .docs/spec.md
  # or remove the entire .docs directory:
  rm -rf .docs

Then run 'docli init' again.
```

**File System Errors:**
- "failed to create .docs directory: [error]"
- "failed to write spec.md: [error]"

## Success Messages

### Init Command Success
```
Welcome to docli initialization!
This will guide you through setting up your documentation sync configuration.
üìã Copying needed prompt files...
‚úÖ Prompt files copied successfully!
[... interactive session ...]
‚úÖ Configuration saved to .docs/spec.md

You can now run other docli commands to sync your documentation!
```

### Prompt File Copy Warnings
```
Warning: Failed to copy prompt files: [error description]
```